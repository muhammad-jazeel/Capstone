{% extends 'base.html' %}
{% load static %}

{% block content %}
<div id="wrapper">
    <!-- header begin -->
    <header class="transparent scroll-light has-topbar">
        <div id="topbar" class="topbar-dark text-light"></div>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="de-flex sm-pt10">
                        <div class="de-flex-col">
                            <div class="de-flex-col">
                                <!-- logo begin -->
                                <div id="logo">
                                    <a href="{% static 'index.html' %}">
                                        <img class="logo-1" src="{% static 'images/logo-AUTOASSIST-light.png' %}"
                                            alt="logo" style="height: 100px; width: 100px;">
                                        <img class="logo-2" src="{% static 'images/logo-AUTOASSIST.png' %}" alt="logo"
                                            style="height: 100px; width: 100px;">
                                    </a>
                                </div>
                                <!-- logo close -->
                            </div>
                        </div>
                        {% include 'includes/customer_navbar.html' %}
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- header close -->

    <!-- content begin -->
    <div class="no-bottom no-top zebra" id="content">
        <div id="top"></div>

        <!-- section begin -->
        <section id="subheader" class="jarallax text-light">
            <img src="{% static 'images/background/14.jpg' %}" class="jarallax-img" alt="">
            <div class="center-y relative text-center">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12 text-center">
                            <h1>Profile</h1>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
        </section>
        <!-- section close -->

        <section id="section-cars" class="bg-gray-100">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 mb30">
                        {% include 'includes/customer_sidenavbar.html' %}
                    </div>

                    <div class="col-lg-9">
                        <!-- Profile Heading -->
                        <h2 class="text-uppercase mb-4" style="font-weight: bold;">Profile</h2>

                        <div class="card p-4 rounded-5 mb25">
                            <h4>Personal Details</h4>
                            <!-- Display error message if exists -->
                            {% if error_message %}
                            <div class="alert alert-danger">
                                {{ error_message }}
                            </div>
                            {% endif %}
                            <form method="post" action="{% url 'update_personal_details' %}"
                                enctype="multipart/form-data">
                                {% csrf_token %}
                                <div class="form-group">
                                    <label for="first_name">First Name</label>
                                    <input type="text" id="first_name" name="first_name" class="form-control"
                                        value="{{ user.first_name }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="last_name">Last Name</label>
                                    <input type="text" id="last_name" name="last_name" class="form-control"
                                        value="{{ user.last_name }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="email" id="email" name="email" class="form-control"
                                        value="{{ user.email }}" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="phone_number">Phone Number</label>
                                    <input type="text" id="phone_number" name="phone_number" class="form-control"
                                        value="{{ user.phone_number }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="address">Address</label>
                                    <textarea id="address" name="address" class="form-control" rows="3"
                                        required>{{ user.address }}</textarea>
                                </div>
                                <div class="form-group">
                                    <label for="city">City</label>
                                    <input type="text" id="city" name="city" class="form-control"
                                        value="{{ user.city }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="postal_code">Postal Code</label>
                                    <input type="text" id="postal_code" name="postal_code" class="form-control"
                                        value="{{ user.postal_code }}" required>
                                </div>
                                <div class="form-group">
                                    <label for="profile_image">Profile Picture</label>
                                    <input type="file" id="profile_image" name="profile_image" class="form-control">
                                    {% if user.profile_image %}
                                    <img src="{{ user.profile_image.url }}" alt="Current Profile Picture"
                                        class="mt-3 rounded-circle"
                                        style="width: 100px; height: 100px; object-fit: cover;">
                                    {% endif %}
                                </div>
                                <button type="submit" class="btn-main btn-fullwidth rounded-3 mt-3">Update Personal
                                    Details</button>
                            </form>
                        </div>

                        <div class="card p-4 rounded-5">
                            <h4>Account Settings</h4>
                            {% if error_message_pass %}
                            <div class="alert alert-danger">
                                {{ error_message_pass }}
                            </div>
                            {% endif %}
                            <form method="post" action="{% url 'update_password' %}">
                                {% csrf_token %}
                                <div class="form-group">
                                    <label for="old_password">Old Password</label>
                                    <input type="password" id="old_password" name="old_password" class="form-control"
                                        required>
                                </div>
                                <div class="form-group">
                                    <label for="new_password">New Password</label>
                                    <input type="password" id="new_password" name="new_password" class="form-control"
                                        required>
                                </div>
                                <div class="form-group">
                                    <label for="confirm_password">Confirm New Password</label>
                                    <input type="password" id="confirm_password" name="confirm_password"
                                        class="form-control" required>
                                </div>
                                <div class="form-group mt-3">
                                    <button type="submit" class="btn-main btn-fullwidth rounded-3">Update
                                        Password</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <!-- content close -->

    <a href="#" id="back-to-top"></a>
</div>

{% include 'includes/footer.html' %}

<!-- Javascript Files -->
<script src="{% static 'js/plugins.js' %}"></script>
<script src="{% static 'js/designesia.js' %}"></script>

{% endblock %}